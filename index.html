<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html>
<head>
    <title>Rx Selection - ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏ñ‡∏≤‡∏ß‡∏£</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: 'Helvetica Neue', Arial, sans-serif; text-align: center; padding: 20px; background-color: #f4f7f6; color: #333; }
        .container { max-width: 1100px; margin: auto; }
        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 20px; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-top: 20px; }
        .stat-box { padding: 18px; border-radius: 12px; border: 2px solid #e0e0e0; background: #fff; text-align: left; transition: 0.3s; }
        .stat-name { font-size: 1.1em; font-weight: bold; color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 8px; margin-bottom: 12px; display: flex; justify-content: space-between; }
        .list-section { margin-bottom: 8px; padding: 5px; border-radius: 6px; }
        .section-1 { background-color: #fff5f5; border-left: 4px solid #e74c3c; }
        .section-2 { background-color: #f0f7ff; border-left: 4px solid #3498db; }
        .rank-label { font-size: 12px; font-weight: bold; margin-bottom: 4px; display: block; }
        .label-1 { color: #e74c3c; }
        .label-2 { color: #3498db; }
        .group-tag { display: inline-block; background: white; border: 1px solid #ddd; color: #333; padding: 2px 10px; margin: 2px; border-radius: 15px; font-size: 13px; font-weight: bold; }
        .btn-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; margin-top: 20px; }
        .btn-ajarn { padding: 15px 10px; border-radius: 10px; border: 2px solid #ddd; background: white; cursor: pointer; font-weight: bold; }
        .btn-selected-1 { border-color: #e74c3c !important; background: #fff5f5; color: #e74c3c; }
        input { width: 180px; padding: 15px; border-radius: 10px; border: 2px solid #ddd; font-size: 18px; text-align: center; }
        .btn-main { padding: 15px 40px; background-color: #2ecc71; color: white; cursor: pointer; border: none; font-size: 18px; font-weight: bold; border-radius: 10px; margin-top: 15px; }
        #selection-area, #result-msg { display: none; }
        .edit-notice { background: #fff3cd; color: #856404; padding: 10px; border-radius: 8px; margin-bottom: 15px; font-weight: bold; display: none; }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <h2>üìä ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå</h2>
        <div id="dashboard" class="dashboard-grid"></div>
        <button onclick="clearAllData()" style="margin-top: 20px; color: #999; border: none; background: none; cursor: pointer; font-size: 12px;">[ ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ]</button>
    </div>

    <div class="card">
        <div id="auth-area">
            <h3>üî¢ ‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Å‡∏•‡∏∏‡πà‡∏°</h3>
            <input type="number" id="groupNumber" placeholder="‡πÄ‡∏•‡∏Ç‡∏Å‡∏•‡∏∏‡πà‡∏°" min="1">
            <br>
            <button class="btn-main" onclick="startSelection()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
        </div>

        <div id="selection-area">
            <div id="edit-mode-notice" class="edit-notice">‚ö†Ô∏è ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏î‡πâ</div>
            <p>‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ <strong>‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà: <span id="current-group-display" style="font-size: 24px; color: #e74c3c;"></span></strong> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
            <div id="step-instruction" style="padding:15px; border-radius:8px; font-weight:bold; margin-bottom:15px;"></div>
            <div class="btn-grid" id="ajarn-buttons"></div>
            <br>
            <button id="confirm-btn" class="btn-main" style="background-color: #34495e; display:none;" onclick="finalSubmit()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á</button>
        </div>

        <div id="result-msg">
            <h3 style="color: #27ae60;">‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</h3>
            <button class="btn-main" style="background-color: #34495e;" onclick="resetForm()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        </div>
    </div>
</div>

<script>
    const ajarnList = ["‡∏≠‡∏à.‡∏£‡∏±‡∏ê‡∏û‡∏•", "‡∏≠‡∏à.‡∏õ‡∏Å‡∏£‡∏ì‡πå", "‡∏≠‡∏à.‡∏ô‡∏°‡∏ô‡∏ï‡πå", "‡∏≠‡∏à.‡∏®‡∏£‡∏µ‡∏ß‡∏£‡∏£‡∏ì", "‡∏≠‡∏à.‡πÄ‡∏Å‡∏®‡∏¥‡∏ì‡∏µ", "‡∏≠‡∏à.‡∏≠‡∏£‡∏†‡∏≤", "‡∏≠‡∏à.‡∏•‡∏•‡∏ô‡∏≤", "‡∏≠‡∏à.‡∏™‡∏∏‡∏†‡∏≤‡∏ß‡∏î‡∏µ", "‡∏≠‡∏à.‡∏û‡∏±‡∏ó‡∏ò‡πå‡∏ò‡∏µ‡∏£‡∏≤", "‡∏≠‡∏à.‡∏û‡∏ô‡∏¥‡∏ï‡∏≤", "‡∏≠‡∏à.‡∏≠‡∏±‡∏á‡∏®‡∏∏‡∏°‡∏≤", "‡∏≠‡∏à.‡∏ß‡∏á‡∏®‡∏Å‡∏£", "‡∏≠‡∏à.‡∏™‡∏∏‡∏†‡∏±‡∏ó‡∏£‡∏≤"];

    // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å localStorage ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ
    let allSelections = JSON.parse(localStorage.getItem('rx_selections')) || []; 
    let currentGroupId = "";
    let temp1 = "";
    let temp2 = "";

    function init() {
        renderDashboard();
        renderButtons();
    }

    function renderDashboard() {
        const container = document.getElementById('dashboard');
        container.innerHTML = "";
        ajarnList.forEach(name => {
            const choices1 = allSelections.filter(s => s.choice1 === name);
            const choices2 = allSelections.filter(s => s.choice2 === name);
            const box = document.createElement('div');
            box.className = `stat-box ${(choices1.length + choices2.length) > 1 ? 'alert-multiple' : ''}`;
            
            let html = `<div class="stat-name">${name}</div>`;
            if (choices1.length > 0) {
                html += `<div class="list-section section-1"><span class="rank-label label-1">ü•á ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 1</span>${choices1.map(s => `<span class="group-tag">‡∏Å‡∏•‡∏∏‡πà‡∏° ${s.group}</span>`).join('')}</div>`;
            }
            if (choices2.length > 0) {
                html += `<div class="list-section section-2"><span class="rank-label label-2">ü•à ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö 2</span>${choices2.map(s => `<span class="group-tag">‡∏Å‡∏•‡∏∏‡πà‡∏° ${s.group}</span>`).join('')}</div>`;
            }
            if (choices1.length + choices2.length === 0) html += `<div style="text-align:center; padding:10px; color:#ccc; font-style:italic; font-size:13px;">‡∏ß‡πà‡∏≤‡∏á</div>`;
            box.innerHTML = html;
            container.appendChild(box);
        });
    }

    function renderButtons() {
        const container = document.getElementById('ajarn-buttons');
        container.innerHTML = "";
        ajarnList.forEach(name => {
            const btn = document.createElement('button');
            btn.className = `btn-ajarn ${name === temp1 ? 'btn-selected-1' : ''}`;
            if (name === temp2) btn.style.borderColor = "#3498db";
            btn.innerText = name;
            btn.onclick = () => {
                if (!temp1) { temp1 = name; } 
                else if (!temp2 && name !== temp1) { temp2 = name; document.getElementById('confirm-btn').style.display = 'inline-block'; } 
                else { temp1 = name; temp2 = ""; document.getElementById('confirm-btn').style.display = 'none'; }
                updateInstruction();
                renderButtons();
            };
            container.appendChild(btn);
        });
    }

    function startSelection() {
        const num = document.getElementById('groupNumber').value;
        if (num > 0) {
            currentGroupId = num;
            document.getElementById('current-group-display').innerText = num;
            
            // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
            const existing = allSelections.find(s => s.group === num);
            if (existing) {
                document.getElementById('edit-mode-notice').style.display = 'block';
                temp1 = ""; temp2 = ""; // ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
            } else {
                document.getElementById('edit-mode-notice').style.display = 'none';
                temp1 = ""; temp2 = "";
            }

            document.getElementById('auth-area').style.display = 'none';
            document.getElementById('selection-area').style.display = 'block';
            updateInstruction();
            renderButtons();
        } else { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏•‡∏Ç‡∏Å‡∏•‡∏∏‡πà‡∏°"); }
    }

    function updateInstruction() {
        const ins = document.getElementById('step-instruction');
        if (!temp1) {
            ins.innerHTML = "üéØ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà 1";
            ins.style.backgroundColor = "#fff5f5"; ins.style.color = "#e74c3c";
        } else if (!temp2) {
            ins.innerHTML = `üéØ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà 2 (‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å ${temp1})`;
            ins.style.backgroundColor = "#f0f7ff"; ins.style.color = "#3498db";
        } else {
            ins.innerHTML = `‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö: (1) ${temp1} ‡πÅ‡∏•‡∏∞ (2) ${temp2}`;
            ins.style.backgroundColor = "#e8f5e9"; ins.style.color = "#27ae60";
        }
    }

    function finalSubmit() {
        if (confirm(`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà ${currentGroupId}?`)) {
            // ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
            allSelections = allSelections.filter(s => s.group !== currentGroupId);
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
            allSelections.push({ group: currentGroupId, choice1: temp1, choice2: temp2 });
            
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage (Persistence)
            localStorage.setItem('rx_selections', JSON.stringify(allSelections));
            
            renderDashboard();
            document.getElementById('selection-area').style.display = 'none';
            document.getElementById('result-msg').style.display = 'block';
        }
    }

    function resetForm() {
        document.getElementById('auth-area').style.display = 'block';
        document.getElementById('result-msg').style.display = 'none';
        document.getElementById('groupNumber').value = "";
    }

    function clearAllData() {
        if (confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
            localStorage.removeItem('rx_selections');
            allSelections = [];
            renderDashboard();
        }
    }

    init();
</script>
</body>
</html>
    
  </body>
  
</html>
